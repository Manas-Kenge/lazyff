---
title: "merge"
description: "Concatenate multiple media files into one"
---

The `merge` command joins multiple video or audio files into a single file.

## TUI Mode

In the TUI, merging files is a guided, dialog-based experience.

### Workflow

<Steps>
  <Step title="Select the first file">
    Use the file tree (`Ctrl+B` to toggle) or type `@` to search and select your first video/audio file.
  </Step>
  <Step title="Run /merge">
    Type `/merge` and press Enter.
  </Step>
  <Step title="Select additional files">
    A dialog appears showing video/audio files from the same directory. Select the next file to merge.
  </Step>
  <Step title="Add more or proceed">
    After each selection, choose "Add another file" to continue adding, or "Done - merge these files" to proceed.
  </Step>
  <Step title="Handle different formats">
    If your files have different formats (e.g., `.mp4` and `.webm`), you'll be prompted to choose:
    - **Re-encode**: Slower but handles different codecs (recommended for mixed formats)
    - **Copy**: Fast but requires same codec
  </Step>
  <Step title="Done">
    The merged file is created in the same directory as the first file.
  </Step>
</Steps>

### Example

```
# Select video1.mp4 from file tree, then:
/merge

# Dialog: "Select file to merge with video1.mp4"
# → Select video2.mp4

# Dialog: "2 files selected: video1.mp4, video2.mp4"
# → Choose "Add another file" or "Done - merge these files"

# Output: merged_1234567890.mp4
```

<Note>
  Files are scanned from the selected file's directory (up to 2 levels deep). Only video and audio files are shown.
</Note>

<Tip>
  The order you select files is the order they'll be merged. The first file (selected before `/merge`) is always first in the output.
</Tip>

## CLI Mode

### Syntax

```bash
lazyff merge <inputs...> --output <output> [options]
```

### Arguments

| Argument | Required | Description |
|----------|----------|-------------|
| `inputs` | Yes | Two or more input files to concatenate |

### Options

| Option | Alias | Type | Default | Description |
|--------|-------|------|---------|-------------|
| `--output` | `-o` | string | **required** | Output file path |
| `--reencode` | `-r` | boolean | false | Re-encode files (for different codecs) |
| `--overwrite` | `-y` | boolean | false | Overwrite output if exists |

### Examples

#### Basic Merge

```bash
# Merge two videos
lazyff merge part1.mp4 part2.mp4 -o full.mp4

# Merge multiple videos
lazyff merge clip1.mp4 clip2.mp4 clip3.mp4 -o final.mp4
```

#### Merge Different Formats

When merging files with different codecs, use `--reencode`:

```bash
# Merge MP4 and WebM (re-encode required)
lazyff merge video1.mp4 video2.webm -o combined.mp4 --reencode

# Merge videos with different resolutions
lazyff merge hd.mp4 sd.mp4 -o mixed.mp4 --reencode
```

#### Merge Audio Files

```bash
# Merge MP3 files
lazyff merge song1.mp3 song2.mp3 song3.mp3 -o album.mp3

# Merge WAV files
lazyff merge track1.wav track2.wav -o combined.wav
```

## Modes

### Copy Mode (Default)

Fast concatenation by copying streams directly:

- **Pros**: Very fast, preserves quality
- **Cons**: All files must have same codec, resolution, and frame rate
- **Best for**: Files from the same source or same recording session

### Re-encode Mode

Decodes and re-encodes all inputs:

- **Pros**: Works with any combination of files
- **Cons**: Slower, slight quality reduction
- **Best for**: Mixing different sources, codecs, or resolutions

## Re-encode Settings

When using re-encode mode, lazyff uses:

| Setting | Value |
|---------|-------|
| Video codec | H.264 (libx264) |
| Video CRF | 18 (high quality) |
| Video preset | medium |
| Audio codec | AAC |
| Audio bitrate | 192k |

## Requirements for Copy Mode

For copy mode to work, all input files must have:

- Same video codec (e.g., all H.264)
- Same audio codec (e.g., all AAC)
- Same resolution (e.g., all 1920x1080)
- Same frame rate (e.g., all 30fps)

If any of these differ, use re-encode mode.

## Tips

<Tip>
  If copy mode fails with a codec error, the TUI will prompt you to re-encode. In CLI, add `--reencode`:
  ```bash
  lazyff merge a.mp4 b.mp4 -o out.mp4 --reencode
  ```
</Tip>

<Tip>
  For best quality when merging clips from different sources, first convert them to the same format:
  ```bash
  lazyff convert clip1.mov -f mp4 -r 1080p
  lazyff convert clip2.avi -f mp4 -r 1080p
  lazyff merge clip1.mp4 clip2.mp4 -o final.mp4
  ```
</Tip>

<Warning>
  File order matters! Files are concatenated in the order you select/list them.
</Warning>

## Common Use Cases

### Join Video Parts

```bash
# Recorded video split into parts
lazyff merge recording_001.mp4 recording_002.mp4 recording_003.mp4 -o full_recording.mp4
```

### Combine Clips for YouTube

```bash
# Intro + main content + outro
lazyff merge intro.mp4 main.mp4 outro.mp4 -o youtube_video.mp4 --reencode
```

### Merge Audio Tracks

```bash
# Combine podcast segments
lazyff merge intro.mp3 episode.mp3 outro.mp3 -o full_episode.mp3
```

## Troubleshooting

### "Discarding invalid channel/sample rate"

Files have different audio settings. Use re-encode mode.

### "Non-monotonic DTS"

Files have timestamp issues. Use re-encode mode.

### Output is garbled or glitchy

Files have incompatible codecs. Use re-encode mode.

## See Also

- [trim](/commands/trim) - Cut files before merging
- [convert](/commands/convert) - Convert files to same format before merging
